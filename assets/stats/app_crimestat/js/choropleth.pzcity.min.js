var Choropleth=function(){return function(){var a=this;a.ZOOM_SCALE=1.1;a.MAX_ZOOM_FACTOR=8;a.CUSTOM_MOVE_OVERLAP=0.333;a.name="choropleth";a.dataLabels={};a.dataLabelsSymbol={};a.quantiles={};a.colors={};a.colorsSymbol={};a.opacitySymbol={};a.datapoints;a.symboldatapoints;a.prefix;a.suffix;a.prefixSymbol;a.suffixSymbol;a.maxSymbolSize={};a.radiusSymbol;a.type;a.format;a.formatSymbol;a.tooltip={width:150,height:30};a.initialize=function(){a.viz.changeDimensions((a.viz.getUrlVar("width")||635)*a.viz.size,
(a.viz.getUrlVar("height")||530)*a.viz.size,!1);a.viz.scope.select(".toolsOptions").show();void 0!==a.viz.definition.measures&&(a.dataLabels=a.viz.definition.measures.map(function(a){return a.measure}));void 0!==a.viz.definition.symbolMeasures&&(a.dataLabelsSymbol=a.viz.definition.symbolMeasures.map(function(a){return a.measure}));a.map.initialize();a.seriesNavigator.initialize();a.measureNavigator.initialize();void 0!==a.viz.definition.measures&&a.legend.initialize();a.update(!0,!0)};a.fallback=
function(){a.dataLabels=$.map(a.viz.definition.measures,function(a,c){var g={};g.key=c;g.value=a;return g});a.measureNavigator.fallback();a.map.fallback()};a.update=function(e,c){if(void 0!==a.viz.definition.measures){var g=a.measureNavigator.activeMeasure,d=a.measureNavigator.activeMeasureId;1<a.dataLabels.length&&a.viz.scope.select(".legendSubTitle").text("- "+a.viz.definition.measures[d].label[a.viz.lang]).style("font-size",Math.min(Math.max(10,Math.floor(14*a.viz.size)),14)+"px");a.colors[g]=
a.colors[g]?a.colors[g]:a.viz.definition.measures[d].color?a.viz.definition.measures[d].color:"YlGn";a.changeColorClasses(a.colors[g]);void 0==a.quantiles[g]&&(a.quantiles[g]={});void 0==a.quantiles[g].type&&(a.quantiles[g].type=a.viz.definition.measures[d].quantiles.type||"sequential");if("custom"==a.quantiles[g].type){a.quantiles[g].boundaries=[];for(var h=0;h<a.viz.definition.measures[d].quantiles;h++)a.quantiles[g].boundaries[h]=a.viz.definition.measures[d].quantiles.boundaries[h]}void 0==a.quantiles[g].recalculate&&
(a.quantiles[g].recalculate=a.viz.definition.measures[d].quantiles.periods||0);"ordinal"==a.quantiles[g].type&&(a.quantiles[g].labels=Hierarchy.flattenLabels(a.viz.data.measures[a.viz.definition.measures[d].measure].values),a.quantiles[g].values=Hierarchy.values(a.viz.data.measures[a.viz.definition.measures[d].measure].values));void 0==a.quantiles[g].number&&(a.quantiles[g].number="ordinal"==a.quantiles[g].type?a.quantiles[g].values.length:"custom"==a.quantiles[g].type?a.viz.definition.measures[d].quantiles.boundaries.length+
1:a.viz.definition.measures[d].quantiles.number||6);a.quantiles[g].range=d3.range(0,a.quantiles[g].number);"undefined"===typeof a.quantiles[g].minScale&&(a.quantiles[g].minScale=a.viz.definition.measures[d].quantiles.min||null);"undefined"===typeof a.quantiles[g].maxScale&&(a.quantiles[g].maxScale=a.viz.definition.measures[d].quantiles.max||null);a.prefix=a.viz.definition.measures[d].prefix?a.viz.definition.measures[d].prefix[a.viz.lang]:"";a.suffix=a.viz.definition.measures[d].suffix?a.viz.definition.measures[d].suffix[a.viz.lang]:
"";a.measure=a.viz.data.measures[g];a.format=a.viz.definition.measures[d].format[a.viz.lang];(e||"custom"!==a.quantiles[g].type&&1==a.quantiles[g].recalculate)&&a.legend.calculateScale()}if(void 0!==a.viz.definition.symbolMeasures){var b=a.measureNavigator.activeSymbolMeasure,d=a.measureNavigator.activeSymbolMeasureId;""==a.viz.definition.subject[a.viz.lang].title&&1>=a.dataLabelsSymbol.length&&a.viz.scope.select(".legendDescription").hide();1<a.dataLabelsSymbol.length&&a.viz.scope.select(".legendSymbolSubTitle").text(a.viz.definition.symbolMeasures[d].label[a.viz.lang]).style("font-size",
Math.min(Math.max(10,Math.floor(14*a.viz.size)),14)+"px");a.colorsSymbol[b]=a.colorsSymbol[b]?a.colorsSymbol[b]:a.viz.definition.symbolMeasures[d].color?a.viz.definition.symbolMeasures[d].color:"#ccc";a.maxSymbolSize[b]=a.maxSymbolSize[b]?a.maxSymbolSize[b]:a.viz.definition.symbolMeasures[d].size?a.viz.definition.symbolMeasures[d].size:50;a.opacitySymbol[b]=a.opacitySymbol[b]?a.opacitySymbol[b]:a.viz.definition.symbolMeasures[d].opacity?a.viz.definition.symbolMeasures[d].opacity:0.5;a.prefixSymbol=
a.viz.definition.symbolMeasures[d].prefix?a.viz.definition.symbolMeasures[d].prefix[a.viz.lang]:"";a.suffixSymbol=a.viz.definition.symbolMeasures[d].suffix?a.viz.definition.symbolMeasures[d].suffix[a.viz.lang]:"";a.symbolMeasure=a.viz.data.measures[b];a.formatSymbol=a.viz.definition.symbolMeasures[d].format[a.viz.lang]}c&&(a.seriesNavigator.group=[],a.viz.definition.evolution&&(a.seriesNavigator.group=a.viz.data.facts.filter(function(d){return d[a.viz.definition.geography.dimension]==a.viz.data.facts[0][a.viz.definition.geography.dimension]&&
(null!=d[g]||null!=d[b])}).map(function(b){return f.informat(b[a.viz.definition.evolution.dimension],a.viz.data.dimensions[a.viz.definition.evolution.dimension].type,a.viz.data.dimensions[a.viz.definition.evolution.dimension].informat,a.viz.lang)}).sort(function(a,b){return a instanceof Date?a.getTime()-b.getTime():a>b})),a.seriesNavigator.group&&1<a.seriesNavigator.group.length?a.viz.scope.select(".toolsPlay").show():a.viz.scope.select(".toolsPlay").hide(),a.viz.scope.select(".toolsReset").hide(),
a.seriesNavigator.seriesSize=a.seriesNavigator.group.length,1==a.seriesNavigator.seriesSize||void 0==a.seriesNavigator.seriesPointer)&&(a.seriesNavigator.seriesPointer=a.seriesNavigator.seriesSize-1);a.map.redraw();a.seriesNavigator.drawSeriesNavigator()};a.changeResizeScaleLabels=function(e){a.viz.scope.select(".minScaleSet").text("("+a.locale.text.Maximum+": "+f.format(e[1]-1,a.measure,a.format,a.viz.lang)+")");a.viz.scope.select(".maxScaleSet").text("("+a.locale.text.Minimum+": "+f.format(e[e.length-
2]+1,a.measure,a.format,a.viz.lang)+")")};a.changeColorClasses=function(e){a.viz.scope.select("#legendBars").color(e);a.viz.scope.select("#geoPaths").color(e);a.viz.scope.select("#legendBarsOrdinal").color(e);a.colors[a.measureNavigator.activeMeasure]=e};a.changeNumberOfClasses=function(e){a.quantiles[a.measureNavigator.activeMeasure].number=e;a.update(!0);a.legend.calculateScale()};a.changeMethodClasses=function(e){"custom"==e?(a.viz.scope.select(".divMethodClassesPeriods").hide(),a.quantiles[a.measureNavigator.activeMeasure]=
{}):(a.viz.scope.select(".divMethodClassesPeriods").show(),a.quantiles[a.measureNavigator.activeMeasure].type=e,"custom"!==e&&(a.quantiles[a.measureNavigator.activeMeasure].minScale=null,a.quantiles[a.measureNavigator.activeMeasure].maxScale=null));a.update(!0)};a.changeSymbolSize=function(e){a.maxSymbolSize[a.measureNavigator.activeSymbolMeasure]=150<e?150:e;a.map.updateRadius(!1)};a.changeSymbolColor=function(e){a.colorsSymbol[a.measureNavigator.activeSymbolMeasure]=e;a.viz.scope.select("#geoSymbol").style("fill",
e);a.viz.scope.select(".symbolMeasureNavigator").select("circle").style("fill",e)};a.changeSymbolOpacity=function(e){a.opacitySymbol[a.measureNavigator.activeSymbolMeasure]=e;a.viz.scope.select("#geoSymbol").style("fill-opacity",e);a.viz.scope.select(".symbolMeasureNavigator").select("circle").style("fill-opacity",e)};a.showOptions=function(){a.viz.scope.select(".optionsText").remove();var e=a.viz.scope.select(".optionsTooltip").append("div").attr("class","optionsText");e.append("h2").text(a.locale.text.Options);
if(void 0!==a.viz.definition.measures){var c=a.quantiles[a.measureNavigator.activeMeasure],g=a.viz.scope.select("#legendBars").attr("class");e.append("span").text(a.locale.text.ColorsOfClasses+":");gui.createSelect(e,"choiceColorsOfClasses",a.locale.text.ColorClasses,g,a.changeColorClasses);"ordinal"!==c.type&&(e.append("br"),e.append("span").text(a.locale.text.MethodClasses+":"),gui.createSelect(e,"choiceMethodClasses",a.locale.text.MethodsClasses,c.type,a.changeMethodClasses),e.append("br"),e.append("span").text(a.locale.text.NumberOfClasses+
":"),gui.createSelect(e,"choiceNumberOfClasses",d3.zip(d3.range(3,9),d3.range(3,9)),c.number,a.changeNumberOfClasses),void 0===a.viz.definition.options||a.viz.definition.options.showLegendMinMax||(e.append("br"),e.append("span").text(a.locale.text.ScaleMinimum+": "),e.append("input").attr("type","number").attr("class","choiceMinQuantiles").attr("name","choiceMinQuantiles").attr("value",f.format(c.minMaxRange[0],"numeric",".0f",a.viz.lang)),e.append("button").attr("type","button").text(a.locale.text.Set).on("click",
a.legend.changeScaleMin),e.append("span").attr("class","minScaleSet"),e.append("br"),e.append("span").text(a.locale.text.ScaleMaximum+": "),e.append("input").attr("type","number").attr("class","choiceMaxQuantiles").attr("name","choiceMaxQuantiles").attr("value",f.format(c.minMaxRange[c.minMaxRange.length-1],"numeric",".0f",a.viz.lang)),e.append("button").attr("type","button").text(a.locale.text.Set).on("click",a.legend.changeScaleMax),e.append("span").attr("class","maxScaleSet"),a.changeResizeScaleLabels(c.minMaxRange)))}void 0!==
a.viz.definition.measures&&void 0!==a.viz.definition.symbolMeasures&&(e.append("br"),e.append("hr"));if(void 0!==a.viz.definition.symbolMeasures){var d=a.measureNavigator.activeSymbolMeasure;e.append("span").text(a.locale.text.SymbolColor+":");gui.createSelect(e,"choiceSymbolColor",a.locale.text.ColorClassesSymbol,a.colorsSymbol[d],a.changeSymbolColor);e.append("br");e.append("br");e.append("div").style("float","left").append("span").text(a.locale.text.SymbolSize+":");e.append("div").attr("id","sliderSize").style("float",
"left").style("width","150px").style("margin-left","10px");$("#sliderSize").slider({min:5,max:105,value:a.maxSymbolSize[d],slide:function(c,b){clearTimeout(a.sliderTimeout);a.sliderTimeout=setTimeout(function(){a.maxSymbolSize[d]=b.value;a.changeSymbolSize(b.value)},100)}});e.append("br");e.append("br");e.append("div").style("float","left").append("span").text(a.locale.text.SymbolOpacity+":");e.append("div").attr("id","sliderOpacity").style("float","left").style("width","150px").style("margin-left",
"10px");$("#sliderOpacity").slider({min:0.15,step:0.05,max:1,value:a.opacitySymbol[d],slide:function(c,b){clearTimeout(a.sliderTimeout);a.sliderTimeout=setTimeout(function(){a.opacitySymbol[d]=b.value;a.changeSymbolOpacity(b.value)},100)}});e.append("br")}e.append("hr");e.append("span").text(a.locale.text.ProvinceBorders+":");gui.createCheckbox(e,"choiceProvinceBorders",function(){return a.viz.scope.select("#geoPathBorders").visible()},function(){a.viz.scope.select("#geoPathBorders").toggle()})};
a.getIdentifierTable=function(){for(var e=a.map.geoData.features,c={},g=0;g<e.length;g++)c[e[g].properties.REFNIS]=e[g].properties[a.viz.lang];return c};a.updateData=function(){};a.redraw=function(){a.update(!0,!1)};a.reset=function(){a.measureNavigator.reset();a.seriesNavigator.reset();a.map.reset();a.quantiles={};a.colors={};a.colorsSymbol={};a.opacitySymbol={};a.maxSymbolSize={};a.update(!0);a.viz.scope.select(".popup").hide()};a.bind=function(e){e=d3.select(e).append("div").classed("body choropleth",
!0).html('  <div class="navigator">     <div class="measureNavigator"></div>     <div class="symbolMeasureNavigator"></div>  </div>  <div class="compass hidden">    <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="60" height="60">      <circle class="compassCircle move" cx="30" cy="30" r="28" fill="white" opacity="0.75"/>      <path class="compassButton up" d="M30 5 l9   9 a40, 70 0 0,0 -18,  0z" />      <path class="compassButton left" d="M5 30 l9  -9 a70, 40 0 0,0   0, 18z" />      <path class="compassButton down" d="M30 55 l9  -9 a40, 70 0 0,1 -18,  0z" />      <path class="compassButton right" d="M55 30 l-9 -9 a70, 40 0 0,1   0, 18z" />      <circle class="compassCircle zoom" cx="30" cy="30" r="15"/>      <circle class="compassButton zoomIn active"  cx="30" cy="23" r="6"/>      <circle class="compassButton zoomOut"  cx="30" cy="37" r="6"/>      <rect class="plus-minus" x="26" y="35.5" width="8" height="3"/>      <rect class="plus-minus" x="26" y="21.5" width="8" height="3"/>      <rect class="plus-minus" x="28.5" y="19" width="3" height="8"/>    </svg>  </div>  <div class="tooltip hidden"></div>  <div class="legend">    <div class="choices hidden"></div>    <div id="legendBarsOrdinal" class="hidden"></div>    <div class="legendDescription">      <div class="legendTitle">        <span class="legendMainTitle"></span>&nbsp;<span class="legendSubTitle"></span><br>        &nbsp;<span class="legendSymbolSubTitle hidden"></span><br>      </div>    </div>    <div class="legendBarsNormal hidden">      <div class="legendKey hidden">        <span class="legendKeyLabel"></span>        <div class="hidden legendKeyArrowBox"><img src="css/images/arrowLeft.gif" class="hidden legendKeyArrow legendKeyPrevious"></div>        <span class="legendKeyValue"></span>        <div class="hidden legendKeyArrowBox"><img src="css/images/arrowRight.gif" class="hidden legendKeyArrow legendKeyNext"></div>        <img class="legendKeyInfo hidden" src="css/images/info.gif">      </div>      <div id="legendBars" ></div>      <div class="legendLabels">        <div class="min"></div>        <div class="max"></div>      </div>    </div>  </div>  <div class="legendKeyInfoBox hidden"></div>');
e.select(".up").on("mousedown",function(){d3.select(this).classed("active")&&a.map.beginMove("up")});e.select(".left").on("mousedown",function(){d3.select(this).classed("active")&&a.map.beginMove("left")});e.select(".down").on("mousedown",function(){d3.select(this).classed("active")&&a.map.beginMove("down")});e.select(".right").on("mousedown",function(){d3.select(this).classed("active")&&a.map.beginMove("right")});e.select(".zoomIn").on("click",function(){a.map.moveMap("zoomIn")});e.select(".zoomOut").on("click",
function(){a.map.moveMap("zoomOut")});e.selectAll(".compassButton").on("mouseup",function(){a.map.endMove()}).on("mouseout",function(){a.map.endMove()})};a.locale=function(){var a={lang:"NL",text:{}},c={NL:{},FR:{},EN:{},DE:{}};a.select=function(g){a.text=c[g]};c.FR.Months="janvier f\u00e9vrier mars avril mai juin juillet ao\u00fbt septembre octobre novembre d\u00e9cembre".split(" ");c.FR.Days="dimanche lundi mardi mercredi jeudi vendredi samedi".split(" ");c.FR.Options="Param\u00e8tres";c.FR.ColorsOfClasses=
"Couleurs";c.FR.NumberOfClasses="Nombre de classes";c.FR.MethodClasses="M\u00e9thode de discr\u00e9tisation";c.FR.ProvinceBorders="Afficher les limites des provinces";c.FR.ColorClasses=[["Bleu","Blues"],["Rouge","Reds"],["Pourpre","Purples"],["Vert","Greens"],["Orange","Oranges"],["Gris","Greys"],["Jaune-Vert","YlGn"],["Jaune-Vert-Blue","YlGnBu"],["Vert-Blue","GnBu"],["Blue-Vert","BuGn"],["Pourpre-Blue-Vert","PuBuGn"],["Pourpre-Blue","PuBu"],["Blue-Pourpre","BuPu"],["Pourpre-Rouge","PuRd"],["Rouge-Pourpre",
"RdPu"],["Orange-Rouge","OrRd"],["Jaune-Orange-Rouge","YlOrRd"],["Jaune-Orange-Brun","YlOrBr"],["Pourpre-Brun","PuOr"],["Brun-Sarcelle","BrBG"],["Pourpre-Vert","PRGn"],["Rose-Bleu","PiBl"]];c.FR.ColorClassesSymbol=[["Bleu","blue"],["Rouge","red"],["Pourpre","purple"],["Vert","green"],["Orange","orange"],["Gris","grey"],["Blanc","white"],["Noir","black"],["Brun","brown"]];c.FR.MethodsClasses=[["Amplitude constante","sequential"],["Effectifs \u00e9gaux","quantiles"],["K-means","kmeans"],["Personnalis\u00e9",
"custom"]];c.FR.ScaleMinimum="\u00c9chelle minimum";c.FR.ScaleMaximum="\u00c9chelle maximum";c.FR.Minimum="Min";c.FR.Maximum="Max";c.FR.SymbolSize="Taille des bulles";c.FR.SymbolOpacity="Opacit\u00e9 des bulles";c.FR.SymbolColor="Couleur des bulles";c.FR.Set="Adaptez";c.FR.NoSVG="Votre browser ne supporte pas des visualisations en SVG. Faites un update ou utilisez un browser avec SVG-support pour pouvoir voir cette visualisation.";c.FR.LegendKey="Legende bas\u00e9e sur";c.FR.LegendKeyInfo="<p>Il y a plusieurs fa\u00e7ons de calculer les classes:</p><ul><li><b>Toutes les p\u00e9riodes</b>: Les donn\u00e9es de toutes les p\u00e9riodes sont utilis\u00e9es pour calculer les classes. L'avantage est que les classes restent stables de p\u00e9riode \u00e0 p\u00e9riode.</li><li><b>Par p\u00e9riode</b>: les classes sont calcul\u00e9es sur base des donn\u00e9es de la p\u00e9riode choisie.</li></ul><p>Cliquez sur la p\u00e9riode pour change la mani\u00e8re de calculer les classes. Dans le cas d'un calcul par p\u00e9riode: utilisez les fl\u00e8ches pour s\u00e9lectionner une p\u00e9riode de base.";
c.FR.Export="Faites l'export des donn\u00e9es (format .CSV)";c.FR.Export="";c.FR.ExportHelp="* Copiez-collez par exemple en Excel";c.FR.NoData="Donn\u00e9es confidentielles";c.FR.Metadata="T\u00e9l\u00e9charger la fiche de m\u00e9tadonn\u00e9es";c.NL.Months="januari februari maart april mei juni juli augustus september oktober november december".split(" ");c.NL.Days="zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" ");c.NL.Options="Opties";c.NL.ColorsOfClasses="Kleuren";c.NL.NumberOfClasses=
"Aantal klassen";c.NL.MethodClasses="Methode voor het berekenen van de klassen";c.NL.ProvinceBorders="Geef de grenzen van de provincies weer";c.NL.ColorClasses=[["Blauw","Blues"],["Rood","Reds"],["Paars","Purples"],["Groen","Greens"],["Oranje","Oranges"],["Grijs","Greys"],["Geel-Groen","YlGn"],["Geel-Groen-Blauw","YlGnBu"],["Groen-Blauw","GnBu"],["Blauw-Groen","BuGn"],["Paars-Blauw-Groen","PuBuGn"],["Paars-Blauw","PuBu"],["Blauw-Paars","BuPu"],["Paars-Rood","PuRd"],["Rood-Paars","RdPu"],["Oranje-Rood",
"OrRd"],["Geel-Oranje-Rood","YlOrRd"],["Geel-Oranje-Bruin","YlOrBr"],["Paars-Bruin","PuOr"],["Bruin-Turquoise","BrBG"],["Paars-Groen","PRGn"],["Roze-Blauw","PiBl"]];c.NL.ColorClassesSymbol=[["Blauw","blue"],["Rood","red"],["Paars","purple"],["Groen","green"],["Oranje","orange"],["Grijs","grey"],["Wit","white"],["Zwart","black"],["Bruin","brown"]];c.NL.MethodsClasses=[["Lineair","sequential"],["Kwantielen","quantiles"],["K-means","kmeans"],["Aangepast","custom"]];c.NL.ScaleMinimum="Schaalminimum";
c.NL.ScaleMaximum="Schaalmaximum";c.NL.Minimum="Min";c.NL.Maximum="Max";c.NL.SymbolSize="Cirkelgrootte";c.NL.SymbolOpacity="Ondoorzichtigheid cirkels";c.NL.SymbolColor="Kleur cirkels";c.NL.Set="Stel in";c.NL.NoSVG="Uw browser ondersteunt deze visualisatie die gebruikt maakt van de SVG-technologie niet goed. U dient uw browser te updaten om deze visualisatie in optimale omstandigheden te kunnen gebruiken.";c.NL.LegendKey="Legende gebaseerd op";c.NL.LegendKeyInfo="<p>De opdeling van de gegevens in klassen kan berekend worden op verschillende manieren:</p><ul><li><b>Alle periodes</b>: de gegevens van alle periodes worden gebruikt om de klassen te berekenen. Dit heeft als voordeel dat de klassen niet veranderen van periode tot periode.</li><li><b>Per periode</b>: de klassen worden berekend op basis van de gegevens voor een enkel gekozen periode.</li></ul><p>Klik op de periodeaanduiding om het type berekening te wijzigen. In het geval van een berekening per periode: klik op de pijlen om een basisperiode te kiezen.";
c.NL.Export="Exporteer gegevens (.CSV-formaat)";c.NL.ExportHelp="* Kopieer bv. in Excel";c.NL.NoData="Confidenti\u00eble gegevens";c.NL.Metadata="Download metadata-fiche";c.EN.Months="January February March April May June July August September October November December".split(" ");c.EN.Days="Sunday Monday Tuesdag Wednesday Thursday Friday Saturday".split(" ");c.EN.Options="Options";c.EN.ColorsOfClasses="Colors map";c.EN.NumberOfClasses="Number of classes";c.EN.MethodClasses="Calculation method for classes";
c.EN.ProvinceBorders="Show border provinces";c.EN.ColorClasses=[["Blue","Blues"],["Red","Reds"],["Purple","Purples"],["Green","Greens"],["Orange","Oranges"],["Grey","Greys"],["Yellow-Green","YlGn"],["Yellow-Green-Blue","YlGnBu"],["Green-Blue","GnBu"],["Blue-Green","BuGn"],["Purple-Blue-Green","PuBuGn"],["Purple-Blue","PuBu"],["Blue-Purple","BuPu"],["Purple-Red","PuRd"],["Red-Purple","RdPu"],["Orange-Red","OrRd"],["Yellow-Orange-Red","YlOrRd"],["Yellow-Orange-Brown","YlOrBr"],["Purple-Brown","PuOr"],
["Brown-Turquoise","BrBG"],["Purple-Green","PRGn"],["Pink-Blue","PiBl"]];c.EN.ColorClassesSymbol=[["Blue","blue"],["Red","red"],["Purple","purple"],["Green","green"],["Orange","orange"],["Grey","grey"],["White","white"],["Black","black"],["Brown","brown"]];c.EN.MethodsClasses=[["Linear","sequential"],["Quantiles","quantiles"],["K-means","kmeans"],["Custom","custom"]];c.EN.ScaleMinimum="Scale minimum";c.EN.ScaleMaximum="Scale maximum";c.EN.Minimum="Min";c.EN.Maximum="Max";c.EN.SymbolSize="Circle size";
c.EN.SymbolOpacity="Circle opacity";c.EN.SymbolColor="Circle color";c.EN.Set="Set";c.EN.NoSVG="Your browser does not support this SVG-visualization. Update your browser to use and view this visualization in optimal conditions.";c.EN.LegendKey="Legend is based on";c.EN.LegendKeyInfo="<p>The classification can be calculated in different ways:</p><ul><li><b>All years</b>: data of all years is used to calculate the classes. The advantage of this is that the classes remain the same for each period.</li><li><b>Per period</b>: the classes are calculated with data of one period.</li></ul><p>Click on the periodselection to change the type of calculation. For the calculation per period: click on the arrows to choose a baseperiod.";
c.EN.Export="Export data (.CSV-format)";c.EN.ExportHelp="* Copy e.g. in Excel";c.EN.NoData="Confidential data";c.EN.Metadata="Download metadata-description";c.DE.Months="januari februari maart april mei juni juli augustus september oktober november december".split(" ");c.DE.Days="zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" ");c.DE.Options="Opties";c.DE.ColorsOfClasses="Kleuren";c.DE.NumberOfClasses="Aantal klassen";c.DE.MethodClasses="Methode voor het berekenen van de klassen";
c.DE.ProvinceBorders="Geef de grenzen van de provincies weer";c.DE.ColorClasses=[["Blauw","Blues"],["Rood","Reds"],["Paars","Purples"],["Groen","Greens"],["Oranje","Oranges"],["Grijs","Greys"],["Geel-Groen","YlGn"],["Geel-Groen-Blauw","YlGnBu"],["Groen-Blauw","GnBu"],["Blauw-Groen","BuGn"],["Paars-Blauw-Groen","PuBuGn"],["Paars-Blauw","PuBu"],["Blauw-Paars","BuPu"],["Paars-Rood","PuRd"],["Rood-Paars","RdPu"],["Oranje-Rood","OrRd"],["Geel-Oranje-Rood","YlOrRd"],["Geel-Oranje-Bruin","YlOrBr"],["Paars-Bruin",
"PuOr"],["Bruin-Turquoise","BrBG"],["Paars-Groen","PRGn"],["Roze-Blauw","PiBl"]];c.DE.ColorClassesSymbol=[["Blauw","blue"],["Rood","red"],["Paars","purple"],["Groen","green"],["Oranje","orange"],["Grijs","grey"],["Wit","white"],["Zwart","black"],["Bruin","brown"]];c.DE.MethodsClasses=[["Lineair","sequential"],["Kwantielen","quantiles"],["K-means","kmeans"],["Aangepast","custom"]];c.DE.ScaleMinimum="Schaalminimum";c.DE.ScaleMaximum="Schaalmaximum";c.DE.Minimum="Min";c.DE.Maximum="Max";c.DE.SymbolSize=
"Cirkelgrootte";c.DE.SymbolOpacity="Ondoorzichtigheid cirkels";c.DE.SymbolColor="Kleur cirkels";c.DE.Set="Stel in";c.DE.NoSVG="Uw browser ondersteunt deze visualisatie die gebruikt maakt van de SVG-technologie niet goed. U dient uw browser te updaten om deze visualisatie in optimale omstandigheden te kunnen gebruiken.";c.DE.LegendKey="Legende gebaseerd op";c.DE.LegendKeyInfo="<p>De opdeling van de gegevens in klassen kan berekend worden op verschillende manieren:</p><ul><li><b>Alle jaren</b>: de gegevens van alle jaren worden gebruikt om de klassen te berekenen. Dit heeft als voordeel dat de klassen niet veranderen van jaar tot jaar.</li><li><b>Per jaar</b>: de klassen worden berekend op basis van de gegevens voor een enkel gekozen jaar.</li></ul><p>Klik op de jaaraanduiding om het type berekening te wijzigen. In het geval van een berekening per jaar: klik op de pijlen om een basisjaar te kiezen.";
c.DE.Export="Exporteer gegevens (.CSV-formaat)";c.DE.ExportHelp="* Kopieer bv. in Excel";c.DE.NoData="Confidenti\u00eble gegevens";c.DE.Metadata="Download metadata-fiche";return a}();a.map=function(){function e(){"normal"==a.viz.mode&&(a.viz.scope.select(".compass").show(),a.viz.scope.select(".body").on("mouseover",function(){a.viz.scope.select(".compass").show()}).on("mouseout",function(){a.viz.scope.select(".compass").hide()}))}function c(a){queue();d3.json("maps/topo.pzcity.json",function(d){d3.keys(d.objects).forEach(function(a){b.geo[a]=
topojson.feature(d,d.objects[a])});a()})}function g(){b.projection=d3.geo.mercator().translate([a.viz.width/2,a.viz.height/2]);b.path=d3.geo.path().projection(b.projection);var d=a.viz.scope.select(".chart").append("svg:g").attr("id","geoPaths");if(void 0!==a.viz.definition.symbolMeasures)var e=a.viz.scope.select(".chart").append("svg:g").attr("id","geoSymbol");var h=a.viz.scope.select(".chart").append("svg:g").attr("id","geoPathBorders");c(function(){d.selectAll("path").data(b.geo[b.geoLevel].features).enter().append("path").attr("id",
function(a){return"p"+a.properties.id}).attr("d",b.path).attr("fill","#ccc").on("click",function(a){b.zoomTo(a)});if(void 0!==a.viz.definition.measures||void 0!==a.viz.definition.symbolMeasures)d.selectAll("path").on("mousemove",b.showTooltip).on("mouseout",b.hideTooltip);if(void 0!==a.viz.definition.symbolMeasures)e.selectAll("g").data(b.geo[b.geoLevel].features).enter().append("svg:circle").attr("transform",function(a){return"translate("+b.path.centroid(a)+")"}).attr("class","circlesSymbolMap").attr("id",
function(a){return"s"+a.properties.id}).attr("r",0).on("mousemove",b.showTooltip).on("click",function(a){b.zoomTo(a)}).on("mouseout",b.hideTooltip);b.zoomTo(null,!0,!0);b.redraw();h.selectAll("path").data(b.geo.provinces.features).enter().append("path").attr("class","geoPathBorders").attr("d",b.path);"municipalities"!=b.geoLevel&&"cantons"!=b.geoLevel&&h.hide()})}function d(d,c){var e=d===a.map.centered?" active":"",h=a.measureNavigator.activeMeasure;data=b.datapoints[d.properties.id];return void 0!==
data&&null!==data?"q"+a.quantiles[h].definedScale(data)+"-"+a.quantiles[h].number+e:""}function h(d,c){data=b.symboldatapoints[d.properties.id];return void 0!==data&&null!==data?a.radiusSymbol(data):0}var b={};b.geoLevel;b.path;b.centered;b.scale=1;b.baseScale=1;b.boundingBox=[];b.baseBoundingBox=[];b.geo={};b.currentTooltipID;b.initialize=function(){b.geoLevel=a.viz.getUrlVar("geo")||"municipalities";e();g();EventBus.register(a,"drilldown",b.onDrilldown)};b.fallback=function(){$(a.viz.scopeStr+" .body").append("<div align='center'>  <img class='fallback'></div>");
b.changeFallback()};b.changeFallback=function(){size=1>a.viz.size?0.7>a.viz.size?0.85*a.viz.size:0.9*a.viz.size:0.95*a.viz.size;date=new Date;dateStr=""+date.getFullYear()+(date.getMonth()+1)+date.getDate();$(a.viz.scopeStr+" .fallback").attr("src","css/images/fallback/choropleth_"+a.viz.getUrlVar("data")+"_"+a.measureNavigator.activeMeasure+"_"+a.viz.lang+".png?d="+dateStr).attr("width",628*size).attr("height",600*size)};var k;b.redraw=function(){if(a.viz.definition.evolution)var c=a.viz.definition.evolution.dimension;
var e=a.viz.definition.geography.dimension;b.datapoints=[];b.symboldatapoints=[];a.viz.data.facts.forEach(function(d){a.viz.definition.evolution&&f.informat(d[c],a.viz.data.dimensions[a.viz.definition.evolution.dimension].type,a.viz.data.dimensions[a.viz.definition.evolution.dimension].informat).getTime()!=a.seriesNavigator.group[a.seriesNavigator.seriesPointer].getTime()||(void 0!==a.viz.definition.measures&&(b.datapoints[d[e]]=d[a.viz.definition.measures[a.measureNavigator.activeMeasureId].measure]),
void 0!==a.viz.definition.symbolMeasures&&(b.symboldatapoints[d[e]]=d[a.viz.definition.symbolMeasures[a.measureNavigator.activeSymbolMeasureId].measure]))});k=d3.max(a.viz.data.facts,function(a){return a.m});if(void 0!==a.viz.definition.measures){var h=a.viz.scope.select("#geoPaths").selectAll("path").attr("class",d);a.viz.definition.measures[a.measureNavigator.activeMeasureId].quantiles.colors&&h.style("fill",function(d,c){var e=a.viz.data.measures[a.measureNavigator.activeMeasure].values.indexOf(b.datapoints[d.properties.id]);
return a.viz.definition.measures[a.measureNavigator.activeMeasureId].quantiles.colors[e]})}void 0!==a.viz.definition.symbolMeasures&&(h=a.viz.scope.select("#geoSymbol").style("fill",a.colorsSymbol[a.measureNavigator.activeSymbolMeasure]).style("fill-opacity",a.opacitySymbol[a.measureNavigator.activeSymbolMeasure]),b.updateRadius(!0))};b.updateRadius=function(d){a.radiusSymbol=d3.scale.sqrt().domain([0,void 0!==k?k:d3.max(d3.values(b.symboldatapoints))]).range([0,a.maxSymbolSize[a.measureNavigator.activeSymbolMeasure]/
b.scale]);var c=a.viz.scope.select("#geoSymbol").selectAll("circle");d&&(c=c.transition().duration(750));c.attr("r",h)};b.onDrilldown=function(d){if(d.dimension==a.viz.definition.geography.dimension){var c=!1;d3.keys(b.geo).forEach(function(a){if(a=b.geo[a].features.filter(function(a){return a.properties.id==d.value})[0])c=!0,b.zoomTo(a,null,!0)});c||b.zoomTo(null,null,!0)}};b.zoomTo=function(d,c,e){b.boundingBox=b.path.bounds(d&&b.centered!=d?d:b.geo[d3.keys(b.geo)[0]]);b.scale=a.ZOOM_SCALE/Math.max((b.boundingBox[1][0]-
b.boundingBox[0][0])/a.viz.height,(b.boundingBox[1][1]-b.boundingBox[0][1])/a.viz.width);c?(b.baseScale=b.scale,$.extend(!0,b.baseBoundingBox,b.boundingBox),d3.select("#geoPaths").style("stroke-width",0.2/b.baseScale+"px"),d3.select("#geoPathBorders").style("stroke-width",1/b.baseScale+"px")):b.scale=Math.min(b.scale,8*b.baseScale);b.zoom(!c);b.centered=d&&b.centered!=d?d:"";a.viz.scope.selectAll("#geoPaths path").style("stroke-width",function(a){return a===b.centered?0.8/b.baseScale:null}).classed("active",
function(a){return a===b.centered});e||EventBus.emit(a,"drilldown",{dimension:a.viz.definition.geography.dimension,value:b.centered?b.centered.properties.id:b.centered})};b.zoom=function(d,c){var e=a.viz.scope.selectAll("#geoPaths, #geoPathBorders, #geoSymbol");d&&(e=e.transition().ease(c?c:"cubic-in-out").duration(750));e.attr("transform","translate("+b.projection.translate()+")scale("+b.scale+")translate("+-(b.boundingBox[1][0]+b.boundingBox[0][0])/2+","+-(b.boundingBox[1][1]+b.boundingBox[0][1])/
2+")");void 0!==a.viz.definition.symbolMeasures&&b.updateRadius(!0);b.setCompassActivity()};b.beginMove=function(a){b.moveMap(a);b.moveMapInterval=setInterval(function(){b.moveMap(a)},"zoomOut"==a||"zoomIn"==a?1E3:500)};b.endMove=function(){void 0!==b.moveMapInterval&&clearTimeout(b.moveMapInterval)};b.moveMap=function(d){a.viz.scope.selectAll("#geoPaths path.active").classed("active",!1);if("zoomIn"==d||"zoomOut"==d)"zoomIn"==d&&b.scale/b.baseScale<a.MAX_ZOOM_FACTOR||"zoomOut"==d&&2.5<b.scale/b.baseScale?
(b.scale="zoomIn"==d?2*b.scale:b.scale/2,b.zoom(!0)):"zoomOut"==d&&2.5>=b.scale/b.baseScale&&b.zoomTo();else if("left"==d||"right"==d||"up"==d||"down"==d){var c=Math.abs(b.boundingBox[1][0]-b.boundingBox[0][0]),e=Math.abs(b.boundingBox[1][1]-b.boundingBox[0][1]),h=a.viz.width*a.CUSTOM_MOVE_OVERLAP/b.scale,g=a.viz.height*a.CUSTOM_MOVE_OVERLAP/b.scale;b.boundingBox[0][0]+="left"==d?-h:"right"==d?h:0;b.boundingBox[1][0]=b.boundingBox[0][0]+c;b.boundingBox[0][1]+="up"==d?-g:"down"==d?g:0;b.boundingBox[1][1]=
b.boundingBox[0][1]+e;b.zoom(!0,"linear")}};b.setCompassActivity=function(){a.viz.scope.selectAll(".compassButton.zoomOut").classed("active",1E-5<Math.abs(b.scale-b.baseScale));a.viz.scope.selectAll(".compassButton.zoomIn").classed("active",b.scale/b.baseScale<a.MAX_ZOOM_FACTOR-1E-5);var d=a.viz.width*a.CUSTOM_MOVE_OVERLAP/b.scale,c=a.viz.height*a.CUSTOM_MOVE_OVERLAP/b.scale;a.viz.scope.selectAll(".compassButton.right").classed("active",b.boundingBox[0][0]+2*d/(b.scale/b.baseScale)<b.baseBoundingBox[1][0]&&
b.scale>b.baseScale);a.viz.scope.selectAll(".compassButton.left").classed("active",b.boundingBox[1][0]-2*d/(b.scale/b.baseScale)>b.baseBoundingBox[0][0]&&b.scale>b.baseScale);a.viz.scope.selectAll(".compassButton.down").classed("active",b.boundingBox[0][1]+2*c/(b.scale/b.baseScale)<b.baseBoundingBox[1][1]&&b.scale>b.baseScale);a.viz.scope.selectAll(".compassButton.up").classed("active",b.boundingBox[1][1]-2*c/(b.scale/b.baseScale)>b.baseBoundingBox[0][1]&&b.scale>b.baseScale)};b.showTooltip=function(d,
c){if(void 0!==a.viz.definition.measures)var e=a.measureNavigator.activeMeasure,h=b.datapoints[d.properties.id];var g=d3.mouse(a.viz.scope.select(".chart").node()).map(function(a){return parseInt(a)}),k=a.viz.scope.select(".tooltip");k.select("table").remove();var m=k.append("table");m.append("tr").append("td").text(d.properties["name"+a.viz.lang]);void 0!==a.viz.definition.measures&&("ordinal"==a.quantiles[e].type?m.append("tr").append("td").html('<span class="tooltip-ordinal-key">'+a.viz.definition.measures[a.measureNavigator.activeMeasureId].label[a.viz.lang]+
"</span>: "+h):(e=m.append("tr").append("td"),b.currentTooltipID=d.properties.id,e.append("span").attr("class","tooltip-prefix"),e.append("span").attr("class","tooltip-value"),e.append("span").attr("class","tooltip-suffix")));void 0!==a.viz.definition.symbolMeasures&&(e=m.append("tr").append("td"),b.currentTooltipID=d.properties.id,e.append("span").attr("class","tooltip-prefix-symbol"),e.append("span").attr("class","tooltip-value-symbol"),e.append("span").attr("class","tooltip-suffix-symbol"));b.updateTooltip();
a.tooltip.width=k.width()||a.tooltip.width;a.tooltip.height=k.height()||a.tooltip.height;m=isNaN(k.width())?a.tooltip.width:k.width();e=isNaN(k.height())?a.tooltip.height:k.height();g[0]=g[0]>a.viz.width-m-30?g[0]-m-15:g[0]+15;g[1]=g[1]>a.viz.height-e-30?g[1]-e-15:g[1]+15;k.style("left",g[0]+"px").style("top",g[1]+"px").show()};b.updateTooltip=function(){if(null!=b.currentTooltipID){var d=a.viz.data.facts.filter(function(d){return d[a.viz.definition.geography.dimension]==b.currentTooltipID&&(!a.viz.definition.evolution||
f.informat(d[a.viz.definition.evolution.dimension],a.viz.data.dimensions[a.viz.definition.evolution.dimension].type,a.viz.data.dimensions[a.viz.definition.evolution.dimension].informat).getTime()==a.seriesNavigator.group[a.seriesNavigator.seriesPointer].getTime())}),c=null,e=null;0<d.length&&(void 0!==a.viz.definition.measures&&(e=d[0][a.viz.definition.measures[a.measureNavigator.activeMeasureId].measure]),void 0!==a.viz.definition.symbolMeasures&&(c=d[0][a.viz.definition.symbolMeasures[a.measureNavigator.activeSymbolMeasureId].measure]));
if(void 0!==a.viz.definition.measures)var h=f.format(e,a.measure,a.format,a.viz.lang);if(void 0!==a.viz.definition.symbolMeasures)var g=f.format(c,a.symbolMeasure,a.formatSymbol,a.viz.lang);null!=h?(a.viz.scope.select(".tooltip-prefix").text(a.prefix+" "),a.viz.scope.select(".tooltip-value").text(h),a.viz.scope.select(".tooltip-suffix").text(" "+a.suffix)):(a.viz.scope.select(".tooltip-prefix").text(""),a.viz.scope.select(".tooltip-value").text(a.locale.text.NoData),a.viz.scope.select(".tooltip-suffix").text(""));
null!=g?(a.viz.scope.select(".tooltip-prefix-symbol").text(a.prefixSymbol+" "),a.viz.scope.select(".tooltip-value-symbol").text(g),a.viz.scope.select(".tooltip-suffix-symbol").text(" "+a.suffixSymbol)):(a.viz.scope.select(".tooltip-prefix-symbol").text(""),a.viz.scope.select(".tooltip-value-symbol").text(a.locale.text.NoData),a.viz.scope.select(".tooltip-suffix-symbol").text(""))}};b.hideTooltip=function(){a.viz.scope.select(".tooltip").hide();b.currentTooltipID=null};b.reset=function(){for(var d=
1;3>=d;d++)b.moveMap("zoomOut");"municipalities"==b.geoLevel?a.viz.scope.select("#geoPathBorders").show():a.viz.scope.select("#geoPathBorders").hide()};return b}();a.seriesNavigator=function(){var e={};e.seriesSize;e.seriesPointer;e.group;var c;e.initialize=function(){a.viz.scope.select(".toolsPlay").on("click",e.play)};e.drawSeriesNavigator=function(){if(1<e.seriesSize){var c=a.viz.scope.select(".choices");c.show().selectAll("span").remove();if("render"!==a.viz.mode){var d=c.append("span").attr("class",
"arrow");0<e.seriesPointer&&d.on("click",function(){e.navigateSeries("down")}).append("img").attr("src","css/images/arrowLeft.gif");a.viz.scope.select(".legendKeyInfo").show()}c.append("span").text(f.format(e.group[e.seriesPointer],a.viz.data.dimensions[a.viz.definition.evolution.dimension],a.viz.definition.evolution.format[a.viz.lang],a.viz.lang));"render"!==a.viz.mode&&(d=c.append("span").attr("class","arrow"),e.seriesPointer<e.seriesSize-1&&d.on("click",function(){e.navigateSeries("up")}).append("img").attr("src",
"css/images/arrowRight.gif"))}};e.navigateSeries=function(c){e.stop();e.seriesPointer+="down"==c?-1:1;a.update(!1)};e.advance=function(){e.seriesPointer++;e.seriesPointer>=e.seriesSize?(e.seriesPointer=e.seriesSize-1,e.stop()):(a.update(),a.map.updateTooltip(),a.viz.scope.select(".toolsPlay").text("Stop |").on("click",e.stop))};e.play=function(){e.seriesPointer=e.seriesPointer<e.seriesSize-1?e.seriesPointer:-1;void 0!==c&&stop();e.advance();c=setInterval(e.advance,1E3)};e.stop=function(){clearInterval(c);
c=void 0;a.viz.scope.select(".toolsPlay").text("Play |").on("click",e.play)};e.reset=function(){e.seriesPointer=void 0;e.transMatrix=[1,0,0,1,0,0]};return e}();a.measureNavigator=function(){function e(){if("render"!==a.viz.mode){if(void 0!==a.viz.definition.measures&&1<a.dataLabels.length){var d=a.viz.scope.select(".measureNavigator"),c=d.append("button").attr("id","chosenChoroplethMeasure");c.append("span").attr("class","button-icon").html("&Sigma;").style("margin-right","5px");c.append("span").attr("class",
"button-label");c.append("span").attr("class","arrow-down");d.append("ul").attr("id","choroplethMeasureUL").selectAll("li").data(a.dataLabels).enter().append("li").attr("class","labelMeasure").attr("id",function(a){return"choroplethMeasure_"+a[0]}).text(function(b){return a.viz.definition.measures[g.measures.indexOf(b)].label[a.viz.lang]}).on("click",function(b){g.changeActiveMeasure(b);"normal"==a.viz.mode?a.update(!0):"fallback"==a.viz.mode&&a.map.changeFallback()})}void 0!==a.viz.definition.symbolMeasures&&
1<a.dataLabelsSymbol.length&&(d=a.viz.scope.select(".symbolMeasureNavigator"),c=d.append("button").attr("id","symbolChoroplethMeasure"),c.append("svg").attr("class","button-circle").append("circle").attr("cx",5).attr("cy",5).attr("r",5),c.append("span").attr("class","button-label"),c.append("span").attr("class","arrow-down"),d.append("ul").attr("id","symbolMeasureUL").selectAll("li").data(a.dataLabelsSymbol).enter().append("li").attr("class","labelMeasure").attr("id",function(a){return"symbolMeasure_"+
a[0]}).text(function(b){return a.viz.definition.symbolMeasures[g.symbolMeasures.indexOf(b)].label[a.viz.lang]}).on("click",function(b){g.changeActiveSymbolMeasure(b);"normal"==a.viz.mode?a.update(!0):"fallback"==a.viz.mode&&a.map.changeFallback()}))}}function c(){if("render"!==a.viz.mode&&1<a.dataLabels.length){var d=$(a.viz.scopeStr+" .measureNavigator");d.attr("width",$("#body").width()-70);$.each(a.dataLabels,function(c,b){d.append("<span class='labelMeasure' id='"+b.value.measure+"'>"+a.viz.definition.measures[b.key].label[a.viz.lang]+
"</span>");$("#"+b.value.measure+".labelMeasure").bind("click",function(b){g.changeActiveMeasure((b.srcElement||b.target).id);"normal"==a.viz.mode?a.update(!0):"fallback"==a.viz.mode&&a.map.changeFallback()})})}}var g={};g.measures;g.activeMeasure;g.activeMeasureId;g.symbolMeasures;g.activeSymbolMeasure;g.activeSymbolMeasureId;g.initialize=function(){void 0!==a.viz.definition.measures&&(g.measures=a.viz.definition.measures.map(function(a){return a.measure}));void 0!==a.viz.definition.symbolMeasures&&
(g.symbolMeasures=a.viz.definition.symbolMeasures.map(function(a){return a.measure}));e();void 0!==a.viz.definition.measures&&g.changeActiveMeasure(a.viz.getUrlVar("value")||a.dataLabels[0]||void 0);void 0!==a.viz.definition.symbolMeasures&&g.changeActiveSymbolMeasure(a.viz.getUrlVar("valueSymbol")||a.dataLabelsSymbol[0]||void 0)};g.fallback=function(){c();g.measures=$.map(a.viz.definition.measures,function(a){return a.measure});g.changeActiveMeasure(a.viz.getUrlVar("value")||a.dataLabels[0].value.measure||
void 0);void 0!==a.viz.definition.symbolMeasures&&(g.symbolMeasures=$.map(a.viz.definition.symbolMeasures,function(a){return a.measure}),g.changeActiveSymbolMeasure(a.viz.getUrlVar("valueSymbol")||a.dataLabelsSymbol[0].value.measure||void 0));$(a.viz.scopeStr+" .measureNavigator").addClass("fallback")};g.changeActiveMeasure=function(d){g.activeMeasure=d;g.activeMeasureId=$.inArray(g.activeMeasure,g.measures);a.viz.scope.select(".measureNavigator").select(".button-label").text(a.viz.definition.measures[g.activeMeasureId].label[a.viz.lang]);
$(".measureNavigator li.labelMeasure").removeClass("sel");$("#choroplethMeasure_"+d).addClass("sel")};g.changeActiveSymbolMeasure=function(d){g.activeSymbolMeasure=d;g.activeSymbolMeasureId=$.inArray(g.activeSymbolMeasure,g.symbolMeasures);a.viz.scope.select(".symbolMeasureNavigator").select(".button-label").text(a.viz.definition.symbolMeasures[g.activeSymbolMeasureId].label[a.viz.lang]);var c=a.colorsSymbol[g.activeSymbolMeasure]?a.colorsSymbol[g.activeSymbolMeasure]:a.viz.definition.symbolMeasures[g.activeSymbolMeasureId].color?
a.viz.definition.symbolMeasures[g.activeSymbolMeasureId].color:"blue",b=a.opacitySymbol[g.activeSymbolMeasure]?a.opacitySymbol[g.activeSymbolMeasure]:a.viz.definition.symbolMeasures[g.activeSymbolMeasureId].opacity?a.viz.definition.symbolMeasures[g.activeSymbolMeasureId].opacity:0.5;a.viz.scope.select(".symbolMeasureNavigator").select("circle").style("fill",c).style("fill-opacity",b);$(".symbolMeasureNavigator li.labelMeasure").removeClass("sel");$("#symbolMeasure_"+d).addClass("sel")};g.reset=function(){void 0!==
a.viz.definition.measures&&g.changeActiveMeasure(a.viz.getUrlVar("value")||g.activeMeasure);void 0!==a.viz.definition.symbolMeasures&&g.changeActiveSymbolMeasure(a.viz.getUrlVar("valueSymbol")||g.activeSymbolMeasure)};return g}();a.legend=function(){function e(){a.viz.scope.select(".legend").show().style("width",Math.max(200,335*a.viz.size)+"px").style("bottom",10*a.viz.size+"px");a.viz.scope.select("#legendBars").style("width",Math.max(200,335*a.viz.size)-10+"px").append("table").attr("class","legendTable").style("font-size",
6*a.viz.size+"px").append("tr");a.viz.scope.select(".legendBarsNormal").style("padding-bottom",15*a.viz.size+"px");a.viz.scope.select(".legendColorOrdinal").style("padding",Math.min(Math.max(8,Math.floor(12*a.viz.size)),12)+"px 0px");a.viz.scope.select(".legendKeyLabel").text(a.locale.text.LegendKey);a.viz.scope.select(".legendKeyInfoBox").html(a.locale.text.LegendKeyInfo);a.viz.scope.select(".legendKeyPrevious").on("click",function(){d.changeGroupPrevious()});a.viz.scope.select(".legendKeyNext").on("click",
function(){d.changeGroupNext()})}function c(c,b){var e=a.quantiles[a.measureNavigator.activeMeasure],g=0==b?f.format(Math.min(e.minMaxRange[b],d.minData),a.measure,a.format,a.viz.lang):f.format(e.minMaxRange[b],a.measure,a.format,a.viz.lang),g=g+" - "+(b==e.number-1?f.format(Math.max(e.minMaxRange[b+1],d.maxData),a.measure,a.format,a.viz.lang):f.format(e.minMaxRange[b+1],a.measure,a.format,a.viz.lang));return g+" "}function g(a,b){return a-b}var d={};d.minScale;d.maxScale;d.minData;d.maxData;d.minScaleDisplay;
d.maxScaleDisplay;d.legendGroup={};d.showLegendKey;d.initialize=function(){e();for(var c=0;c<a.measureNavigator.measures.length;c++)d.legendGroup[a.measureNavigator.measures[c]]=void 0};d.updateLegend=function(){var e=a.quantiles[a.measureNavigator.activeMeasure];if("ordinal"!==e.type){a.viz.scope.select(".legendDescription").style("padding-bottom","0px");a.viz.scope.select(".legendBarsNormal").show();a.viz.scope.select("#legendBarsOrdinal").hide();var b=e.minMaxRange;b.splice(0,1);b.splice(0,0,d.minScaleDisplay);
b.splice(b.length-1,1,d.maxScaleDisplay);var g=a.viz.scope.select("#legendBars").select("tr").selectAll("th").data(b.slice(0,e.number));g.enter().append("th");g.each(function(d,c){d3.select(this).style("width",(b[c+1]-b[c])/(b[b.length-1]-b[0])*($(a.viz.scopeStr+" #legendBars").width()-e.number)+"px")}).attr("class",function(a,b){return"q"+b+"-"+e.number}).attr("title",c);g.exit().remove();"custom"==a.quantiles[a.measureNavigator.activeMeasure].type||1==a.seriesNavigator.seriesSize||void 0==a.seriesNavigator.seriesSize||
void 0!==a.viz.definition.measures[a.measureNavigator.activeMeasureId].legend&&!a.viz.definition.measures[a.measureNavigator.activeMeasureId].legend.visible?a.viz.scope.select(".legendBarsNormal .legendKey").hide():a.viz.scope.select(".legendBarsNormal .legendKey").show()}else a.viz.scope.select(".legendDescription").style("border-radius","5px").style("padding-bottom","5px"),a.viz.scope.select("#legendBarsOrdinal").show(),a.viz.scope.select(".legendBarsNormal").hide(),g=a.viz.scope.select("#legendBarsOrdinal").selectAll("div").data(d3.range(0,
e.number)).enter().append("div"),g.append("span").attr("class",function(a){return"legendColorOrdinal q"+a+"-"+e.number}).attr("title",function(a){return e.minMaxRange[a]}).style("background-color",function(b,d){return a.viz.definition.measures[a.measureNavigator.activeMeasureId].quantiles.colors?a.viz.definition.measures[a.measureNavigator.activeMeasureId].quantiles.colors[d]:null}).style("border-color",function(b,d){return a.viz.definition.measures[a.measureNavigator.activeMeasureId].quantiles.colors?
d3.rgb(a.viz.definition.measures[a.measureNavigator.activeMeasureId].quantiles.colors[d]).darker():null}),g.append("span").attr("class","legendValueOrdinal").text(function(a){return e.minMaxRange[a]})};d.calculateScale=function(){var c=a.quantiles[a.measureNavigator.activeMeasure];1<a.seriesNavigator.seriesSize&&void 0===d.legendGroup[a.measureNavigator.activeMeasure]&&void 0!==a.viz.definition.measures[a.measureNavigator.activeMeasureId].legend&&void 0!==a.viz.definition.measures[a.measureNavigator.activeMeasureId].legend.reference&&
0<=a.seriesNavigator.group.indexOf(a.viz.definition.measures[a.measureNavigator.activeMeasureId].legend.reference)?(d.legendGroup[a.measureNavigator.activeMeasure]=a.seriesNavigator.group.indexOf(a.viz.definition.measures[a.measureNavigator.activeMeasure].legend.reference),d.showLegendKeyArrows(!0)):void 0===d.legendGroup[a.measureNavigator.activeMeasure]&&(d.legendGroup[a.measureNavigator.activeMeasure]=null);var b=null!==d.legendGroup[a.measureNavigator.activeMeasure]?a.viz.data.facts.filter(function(b){return f.informat(b[a.viz.definition.evolution.dimension],
a.viz.data.dimensions[a.viz.definition.evolution.dimension].type,a.viz.data.dimensions[a.viz.definition.evolution.dimension].informat).getTime()==a.seriesNavigator.group[d.legendGroup[a.measureNavigator.activeMeasure]].getTime()}):a.viz.data.facts,b=b.map(function(b){return b[a.viz.definition.measures[a.measureNavigator.activeMeasureId].measure]});d.maxData=Math.max.apply(this,b);d.minData=Math.min.apply(this,b);d.maxScale=null!==c.maxScale?c.maxScale:d.maxData;d.minScale=null!==c.minScale?c.minScale:
d.minData;if("ordinal"!=c.type)if("custom"==c.type)c.values=a.viz.definition.measures[a.measureNavigator.activeMeasureId].quantiles.boundaries.slice(),c.values.splice(0,0,d.minData),c.values.splice(c.values.length,0,d.maxData);else if("sequential"==c.type)c.values=[d.minData,d.maxData];else if("quantiles"==c.type)c.values=b;else if("kmeans"==c.type){for(var e=d3.zip(b),n=science.stats.kmeans().k(c.number)(e),l={},e=0;e<c.number;e++)l[e]=[];for(e=0;e<b.length;e++)l[n.assignments[e]].push(b[e]);b=[];
for(e=0;e<c.number;e++)b.push(l[e][0]),b.push(l[e][l[e].length-1]);b=b.sort(g);l=[];l.push(b[0]);for(e=1;e<b.length;e+=2)l.push(b[e]);c.values=l}"ordinal"==c.type?c.definedScale=d3.scale.ordinal().domain(c.values).range(c.range):c.custom&&"custom"==c.type?(c.definedScale=d3.scale.quantile().domain(c.custom).range(c.range),c.values=c.custom.splice()):c.definedScale=d3.scale.quantile().domain(c.values).range(c.range);if("ordinal"==c.type)for(b=c.definedScale.copy().range(),c.minMaxRange=[],e=0;e<b.length;e++)c.minMaxRange.push(c.values[b[e]]);
else c.minMaxRange=c.definedScale.copy().quantiles(),d.minScaleDisplay=d.minScale<c.minMaxRange[0]?d.minScale:d.minData,d.maxScaleDisplay=d.maxScale<d.maxData&&d.maxScale>c.minMaxRange[c.minMaxRange.length-1]?d.maxScale:d.maxData,c.minMaxRange.splice(0,0,d.minScaleDisplay),c.minMaxRange.splice(c.minMaxRange.length,0,d.maxScaleDisplay);"ordinal"!==c.type&&(d.minScaleDisplay==d.minData?a.viz.scope.select(".legendLabels .min").text(f.format(d.minData,a.measure,a.format,a.viz.lang)):a.viz.scope.select(".legendLabels .min").text("< "+
f.format(d.minScaleDisplay,a.measure,a.format,a.viz.lang)),d.maxScaleDisplay==d.maxData?a.viz.scope.select(".legendLabels .max").text(f.format(d.maxData,a.measure,a.format,a.viz.lang)):a.viz.scope.select(".legendLabels .max").text(f.format(d.maxScaleDisplay,a.measure,a.format,a.viz.lang)+"+"));"ordinal"!==c.type&&1<a.seriesNavigator.seriesSize&&(c=function(b){return f.format(b,a.viz.data.dimensions[a.viz.definition.evolution.dimension],a.viz.definition.evolution.format[a.viz.lang],a.viz.lang)},c=
null!==d.legendGroup[a.measureNavigator.activeMeasure]?c(a.seriesNavigator.group[d.legendGroup[a.measureNavigator.activeMeasure]]):c(a.seriesNavigator.group[0])+" - "+c(a.seriesNavigator.group[a.seriesNavigator.group.length-1]),a.viz.scope.select(".legendKeyInfo").on("mouseover",function(){a.viz.scope.select(".legendKeyInfoBox").show();for(var b=d3.select(this)[0][0],c=0,d=0;!d3.select(b).classed("body");)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;a.viz.scope.select(".legendKeyInfoBox").style("top",
d-a.viz.scope.select(".legendKeyInfoBox").height()-20+"px").style("left",c+15+"px")}).on("mouseout",function(){a.viz.scope.select(".legendKeyInfoBox").hide()}),a.viz.scope.select(".legendKeyValue").text(c).on("click",function(){d.changeGroup()}),d.showLegendKeyArrows(1<a.seriesNavigator.seriesSize&&null!=d.legendGroup[a.measureNavigator.activeMeasure]));d.updateLegend();$(a.viz.scopeStr+" .legendTable").colResizable({disable:!0});$(a.viz.scopeStr+" .legendTable").colResizable({liveDrag:!0,gripInnerHtml:"<div class='grip'></div>",
draggingClass:"dragging",minWidth:3,onResize:d.changeClassBoundaries})};d.changeGroup=function(c){"undefined"==typeof c?null==d.legendGroup[a.measureNavigator.activeMeasure]?(d.legendGroup[a.measureNavigator.activeMeasure]=a.seriesNavigator.seriesPointer,d.showLegendKeyArrows(!0)):(d.legendGroup[a.measureNavigator.activeMeasure]=null,d.showLegendKeyArrows(!1)):(d.legendGroup[a.measureNavigator.activeMeasure]=c,null!=c&&d.showLegendKeyArrows(!0));a.update(!0)};d.changeGroupPrevious=function(){null!==
d.legendGroup[a.measureNavigator.activeMeasure]&&0<d.legendGroup[a.measureNavigator.activeMeasure]&&d.changeGroup(d.legendGroup[a.measureNavigator.activeMeasure]-1)};d.changeGroupNext=function(){null!==d.legendGroup[a.measureNavigator.activeMeasure]&&d.legendGroup[a.measureNavigator.activeMeasure]<a.seriesNavigator.seriesSize-1&&d.changeGroup(d.legendGroup[a.measureNavigator.activeMeasure]+1)};d.showLegendKeyArrows=function(c){c?(a.viz.scope.selectAll(".legendKeyArrowBox").show(),d.legendGroup[a.measureNavigator.activeMeasure]<
a.seriesNavigator.seriesSize-1?a.viz.scope.select(".legendKeyNext").show():a.viz.scope.select(".legendKeyNext").hide(),0<d.legendGroup[a.measureNavigator.activeMeasure]?a.viz.scope.select(".legendKeyPrevious").show():a.viz.scope.select(".legendKeyPrevious").hide()):(a.viz.scope.selectAll(".legendKeyArrow").hide(),a.viz.scope.selectAll(".legendKeyArrowBox").hide())};d.changeClassBoundaries=function(c){c=a.quantiles[a.measureNavigator.activeMeasure];a.viz.scope.select(".choiceMethodClasses").selected("custom");
c.type="custom";c.custom=[];var b=[0],e=0;a.viz.scope.select(".legendTable").selectAll("th").each(function(){e+=d3.select(this).width();b.push(e)});var g=d3.scale.linear().domain([0,a.viz.scope.select(".legendTable").width()]).range([d.minScale,d.maxScale]);c.custom=b.map(function(a){return g(a)});c.minMaxRange=c.custom;a.changeResizeScaleLabels(c.minMaxRange);c.definedScale=d3.scale.quantile().domain(c.custom).range(c.range);d.updateLegend();a.map.redraw()};d.changeScaleMin=function(){var c=a.quantiles[a.measureNavigator.activeMeasure],
b=parseFloat(a.viz.scope.select(".choiceMinQuantiles").property("value"));b<c.minMaxRange[1]&&(c.minScale=b,d.calculateScale())};d.changeScaleMax=function(){var c=a.quantiles[a.measureNavigator.activeMeasure],b=parseFloat(a.viz.scope.select(".choiceMaxQuantiles").property("value"));b>c.minMaxRange[c.minMaxRange.length-2]&&(c.maxScale=b,d.calculateScale())};return d}()}}();