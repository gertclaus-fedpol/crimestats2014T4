var OrdinalBarchart=function(){return function(){var a=this;a.name="barchart";a.noPrebuildSVG=!0;a.keys=[];a.data=[];a.originalMatrix=[];a.width;a.height;a.margins={left:60,right:10,top:30,bottom:20};a.tooltip;a.rect=[];a.mode="stacked";a.stack;a.matrix=[];a.bind=function(a){d3.select(a).append("div").classed("body ordinalbarchart",!0).html('  <div class="tooltip hidden"></div>  <div class="title"></div>  <div class="chart"></div>')};a.updateData=function(c){var b=a.viz.definition.bar.measure;a.total=
0;c.forEach(function(e,g){var d=f.informat(e[b],a.viz.data.measures[b].type,a.viz.data.measures[b].informat,a.viz.lang);c[g][b]=d;a.total+=d});a.data=a.viz.definition.options&&a.viz.definition.options.sort?c.sort(function(a,c){return c[b]-a[b]}):c};this.determineMaxLength=function(){this.maxLength=0;Hierarchy.values(a.viz.data.dimensions[a.viz.definition.category.dimension].values).forEach(function(c){c=f.format(c,a.viz.data.dimensions[a.viz.definition.category.dimension],a.viz.definition.category.format[a.viz.lang],
a.viz.lang);a.maxLength=c.length>a.maxLength?c.length:a.maxLength})};a.initialize=function(){a.viz.changeDimensions((a.viz.getUrlVar("width")||400)*a.viz.size,(a.viz.getUrlVar("height")||200)*a.viz.size,!1);a.determineMaxLength();a.updateData(a.viz.data.facts);a.margins.left=15+6*a.maxLength;a.width=a.viz.width-a.margins.left-a.margins.right-30;a.height=a.viz.height-a.margins.top-a.margins.bottom;a.viz.scope.select(".title").text(a.viz.definition.subject[a.viz.lang].title);a.viz.scope.select(".chart").style("height",
a.height+a.margins.top+a.margins.bottom-25+"px");("render"==a.viz.mode||1>=a.viz.definition.visualisations.possible.length)&&a.viz.scope.select(".options").hide();a.tooltip=a.viz.scope.select(".tooltip");a.redraw()};a.redraw=function(){a.x=d3.scale.linear().domain([0,d3.max(a.data,function(b){return b[a.viz.definition.bar.measure]})]).range([2,a.width]);var c=a.viz.scope.select(".chart").selectAll(".barline").data(a.data,function(b){return b[a.viz.definition.category.dimension]}),b=0;barlines=c.enter().append("div").style("top",
function(a){return 10+18*b++ +"px"}).attr("class","barline");barlines.append("div").attr("class","category").text(function(b){return f.format(b[a.viz.definition.category.dimension],a.viz.data.dimensions[a.viz.definition.category.dimension],a.viz.definition.category.format,a.viz.lang)}).style("width",a.margins.left+"px");barlines.append("div").attr("class","bar").style("background-color",a.viz.definition.bar.color);a.viz.definition.options&&a.viz.definition.options.labels&&barlines.append("div").attr("class",
"label");b=0;c.transition().duration(500).delay(1E3).style("top",function(a,c){return 10+18*b++ +"px"});a.viz.scope.select(".chart").selectAll(".bar").data(a.data,function(b){return b[a.viz.definition.category.dimension]}).style("overflow","visible").transition().duration(500).style("width",function(b){return a.x(b[a.viz.definition.bar.measure])+"px"});a.viz.scope.select(".chart").selectAll(".label").data(a.data,function(b){return b[a.viz.definition.category.dimension]}).text(function(b){return f.format(b[a.viz.definition.bar.measure],
a.viz.data.measures[a.viz.definition.bar.measure],a.viz.definition.bar.format[a.viz.lang],a.viz.lang)}).style("left",function(b){return 6*f.format(b[a.viz.definition.bar.measure],a.viz.data.measures[a.viz.definition.bar.measure],a.viz.definition.bar.format[a.viz.lang],a.viz.lang).length+5>a.x(b[a.viz.definition.bar.measure])?a.margins.left+5+a.x(b[a.viz.definition.bar.measure])+"px":a.margins.left+5+"px"}).style("color",function(b){return 6*f.format(b[a.viz.definition.bar.measure],a.viz.data.measures[a.viz.definition.bar.measure],
a.viz.definition.bar.format[a.viz.lang],a.viz.lang).length+5>a.x(b[a.viz.definition.bar.measure])?"black":"white"});c.exit().transition().attr("opacity",0).remove()};a.showTooltip=function(){var c=d3.select(d3.event.target).datum(),b=f.format(c[a.viz.definition.category.dimension],a.viz.data.dimensions[a.viz.definition.category.dimension],a.viz.definition.category.format[a.viz.lang],a.viz.lang),e=f.format(c[a.viz.definition.bar.measure],a.viz.data.measures[a.viz.definition.bar.measure],a.viz.definition.bar.format[a.viz.lang],
a.viz.lang),g=f.format(a.total,a.viz.data.measures[a.viz.definition.bar.measure],a.viz.definition.bar.format[a.viz.lang],a.viz.lang);a.tooltip.show().transition().duration(50).style("opacity",1E-5);a.tooltip.text("");a.tooltip.append("span").attr("class","tooltipkey").text(b);var b=a.tooltip.append("table"),d=b.append("tr");d.append("th").text(a.viz.definition.bar.label[a.viz.lang]);d.append("td").text(e);a.viz.definition.options&&a.viz.definition.options.totals&&(d.append("td").text(d3.format("%")(c[a.viz.definition.bar.measure]/
a.total)),d=b.append("tr"),d.append("th").text(a.locale.text.Total),d.append("td").text(g));a.tooltip.transition().duration(50).style("opacity",1)};a.moveTooltip=function(){var c=d3.event.pageX-$(a.viz.scopeStr+" .body").offset().left,b=d3.event.pageY-$(a.viz.scopeStr+" .body").offset().top,e=a.tooltip.height()||75,g=a.tooltip.width()||150,c=c>a.width-g-30?c-g-30:c+15,b=b<e+30?15:b-e-15;a.tooltip.style("left",(0>c?c+g+50:c)+"px").style("top",b+"px")};a.hideTooltip=function(){d3.select(this).style("stroke",
"none");a.tooltip.transition().duration(250).style("opacity",1E-5).each("end",function(){a.tooltip.hide()})};a.fallback=function(){a.viz.changeDimensions((a.viz.getUrlVar("width")||800)*a.viz.size,(a.viz.getUrlVar("height")||395)*a.viz.size,!1);$("#legend").hide();$("#body").append("<div align='center'>  <img id='fallback'>");size=1>a.viz.size?0.7>a.viz.size?0.9*a.viz.size:0.95*a.viz.size:a.viz.size;date=new Date;dateStr=""+date.getFullYear()+(date.getMonth()+1)+date.getDate();$("#fallback").attr("src",
"css/images/fallback/ordinalbarchart"+a.viz.getUrlVar("data")+"_"+a.viz.lang+".png?d="+dateStr).attr("width",(a.viz.getUrlVar("width")||800)*size).attr("height",(a.viz.getUrlVar("height")||350)*size*(600/350))};a.reset=function(){};a.locale=function(){var a={lang:"NL",text:{}},b={NL:{},FR:{},EN:{},DE:{}};a.select=function(e){a.text=b[e]};b.FR.Months="janvier f\u00e9vrier mars avril mai juin juillet ao\u00fbt septembre octobre novembre d\u00e9cembre".split(" ");b.FR.Days="dimanche lundi mardi mercredi jeudi vendredi samedi".split(" ");
b.FR.Options="Param\u00e8tres";b.FR.NoSVG="Votre browser ne supporte pas des visualisations en SVG. Faites un update ou utilisez un browser avec SVG-support pour pouvoir voir cette visualisation.";b.FR.Export="Faites l'export des donn\u00e9es (format .CSV)";b.FR.ExportHelp="* Copiez-collez par example en Excel";b.FR.Stacked="Empil\u00e9";b.FR.Legend="Legende";b.FR.Total="TOTAL";b.FR.Grouping="Groupement";b.FR.Metadata="Telecharger la fiche de metadonn\u00e9es";b.NL.Months="januari februari maart april mei juni juli augustus september oktober november december".split(" ");
b.NL.Days="zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" ");b.NL.Options="Opties";b.NL.NoSVG="Uw browser ondersteunt deze visualisatie die gebruikt maakt van de SVG-technologie niet goed. U dient uw browser te updaten om deze visualisatie in optimale omstandigheden te kunnen gebruiken.";b.NL.Export="Exporteer gegevens (.CSV-formaat)";b.NL.ExportHelp="* Kopieer bv. in Excel";b.NL.Stacked="Gestapeld";b.NL.Legend="Legende";b.NL.Total="Totaal";b.NL.Grouping="Groepering";b.NL.Metadata=
"Download metadata-fiche";b.DE.Months="januari februari maart april mei juni juli augustus september oktober november december".split(" ");b.DE.Days="zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" ");b.DE.Options="Opties";b.DE.NoSVG="Uw browser ondersteunt deze visualisatie die gebruikt maakt van de SVG-technologie niet goed. U dient uw browser te updaten om deze visualisatie in optimale omstandigheden te kunnen gebruiken.";b.DE.Export="Exporteer gegevens (.CSV-formaat)";b.DE.ExportHelp=
"* Kopieer bv. in Excel";b.DE.Stacked="Gestapeld";b.DE.Legend="Legende";b.DE.Total="Totaal";b.DE.Grouping="Groepering";b.DE.Metadata="Download metadata-fiche";b.EN.Months="januari februari maart april mei juni juli augustus september oktober november december".split(" ");b.EN.Days="zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" ");b.EN.Options="Opties";b.EN.NoSVG="Uw browser ondersteunt deze visualisatie die gebruikt maakt van de SVG-technologie niet goed. U dient uw browser te updaten om deze visualisatie in optimale omstandigheden te kunnen gebruiken.";
b.EN.Export="Exporteer gegevens (.CSV-formaat)";b.EN.ExportHelp="* Kopieer bv. in Excel";b.EN.Stacked="Gestapeld";b.EN.Legend="Legende";b.EN.Total="Totaal";b.EN.Grouping="Groepering";b.EN.Metadata="Download metadata-fiche";return a}()}}();